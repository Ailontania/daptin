(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"33a5":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page-container",[n("q-page",[n("user-header-bar",{staticStyle:{"border-bottom":"1px solid black"},attrs:{buttons:{after:[]},title:"Calendar"}}),n("div",{staticClass:"row"},[n("div",{class:{"col-2":e.showSideBar}},[e.showSideBar?n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("q-date",{staticStyle:{background:"transparent",width:"200px","min-width":"0px"},attrs:{"today-btn":"",minimal:"",flat:""},on:{input:e.setDate},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),n("div",{staticClass:"col-12 q-pa-md",staticStyle:{display:"none"}},[n("div",{staticClass:"text-center vertical-middle trash-box",staticStyle:{height:"100px",width:"100%",border:"1px solid red",padding:"5px","border-radius":"5px"},on:{drop:e.eventTrashed}},[n("br"),n("q-icon",{attrs:{size:"3em",name:"fas fa-trash"}}),n("br"),n("span",{staticClass:"text-small"},[e._v("Drop events here to delete them")])],1)])]):e._e()]),n("div",{class:{"col-10":e.showSideBar,"col-12":!e.showSideBar},staticStyle:{"border-left":"1px solid black"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("q-toolbar",[n("q-btn",{staticStyle:{border:"1px solid black"},attrs:{flat:"",label:"Today"},on:{click:function(t){return e.setDate()}}}),n("q-btn",{attrs:{flat:"",icon:"fas fa-sync-alt"},on:{click:function(t){return e.calendar.refetchEvents()}}}),n("span",{staticClass:"text-h6"},[e._v(e._s(e.monthNames[e.date.getMonth()])+" "+e._s(e.date.getFullYear()))]),n("q-btn",{attrs:{icon:"fas fa-plus",flat:""},on:{click:function(t){(e.showEventDialogTarget=!0)&&(e.showEventDialog=!0)}}},[n("q-menu",{ref:"newEventDialog",staticStyle:{overflow:"hidden"},attrs:{target:e.showEventDialogTarget}},[n("q-bar",[n("div",{staticClass:"text-weight-bold "},[e._v("\n                      New event\n                    ")])]),n("q-card",{staticClass:"q-pa-md",staticStyle:{"min-width":"450px",overflow:"hidden"}},[n("q-card-section",[n("q-input",{attrs:{label:"Title"},model:{value:e.newEvent.event_title,callback:function(t){e.$set(e.newEvent,"event_title",t)},expression:"newEvent.event_title"}})],1),n("q-card-section",{staticStyle:{"padding-left":"10px"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-6"},[n("q-btn-toggle",{staticStyle:{padding:"5px"},attrs:{size:"sm",dense:"",flat:"",options:[{label:"Event",value:"event"},{label:"Reminder",value:"reminder"},{label:"Task",value:"task"}]},model:{value:e.newEvent.event_type,callback:function(t){e.$set(e.newEvent,"event_type",t)},expression:"newEvent.event_type"}})],1),n("div",{staticClass:"col-6"},[n("q-checkbox",{attrs:{label:"Full day event"},model:{value:e.newEvent.all_day,callback:function(t){e.$set(e.newEvent,"all_day",t)},expression:"newEvent.all_day"}})],1)])]),n("q-tab-panels",{staticClass:"shadow-2 rounded-borders bg-transparent",model:{value:e.newEvent.event_type,callback:function(t){e.$set(e.newEvent,"event_type",t)},expression:"newEvent.event_type"}},[n("q-tab-panel",{staticClass:"new-event-panel",attrs:{name:"event"}},[n("q-card-section",[n("q-input",{attrs:{label:"Event date and time",filled:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm"},model:{value:e.newEvent.date,callback:function(t){e.$set(e.newEvent,"date",t)},expression:"newEvent.date"}},[n("div",{staticClass:"row items-center justify-end"},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[n("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:""},model:{value:e.newEvent.date,callback:function(t){e.$set(e.newEvent,"date",t)},expression:"newEvent.date"}},[n("div",{staticClass:"row items-center justify-end"},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.newEvent.date,callback:function(t){e.$set(e.newEvent,"date",t)},expression:"newEvent.date"}})],1),e.newEventConfig.showAddDescription?n("q-card-section",[n("q-editor",{attrs:{label:"Description"},model:{value:e.newEvent.event_description,callback:function(t){e.$set(e.newEvent,"event_description",t)},expression:"newEvent.event_description"}})],1):e._e(),e.newEventConfig.showAddLocation?n("q-card-section",[n("q-input",{attrs:{label:"Event location"},model:{value:e.newEvent.event_location,callback:function(t){e.$set(e.newEvent,"event_location",t)},expression:"newEvent.event_location"}})],1):e._e()],1),n("q-tab-panel",{staticClass:"new-event-panel",attrs:{name:"reminder"}},[n("q-card-section",[n("q-input",{attrs:{label:"Event date and time",filled:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm"},model:{value:e.newEvent.date,callback:function(t){e.$set(e.newEvent,"date",t)},expression:"newEvent.date"}},[n("div",{staticClass:"row items-center justify-end"},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[n("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:""},model:{value:e.newEvent.date,callback:function(t){e.$set(e.newEvent,"date",t)},expression:"newEvent.date"}},[n("div",{staticClass:"row items-center justify-end"},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.newEvent.date,callback:function(t){e.$set(e.newEvent,"date",t)},expression:"newEvent.date"}})],1)],1),n("q-tab-panel",{staticClass:"new-event-panel",attrs:{name:"task"}},[n("q-card-section",[n("q-input",{attrs:{label:"Event date and time",filled:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm"},model:{value:e.newEvent.date,callback:function(t){e.$set(e.newEvent,"date",t)},expression:"newEvent.date"}},[n("div",{staticClass:"row items-center justify-end"},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[n("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:""},model:{value:e.newEvent.date,callback:function(t){e.$set(e.newEvent,"date",t)},expression:"newEvent.date"}},[n("div",{staticClass:"row items-center justify-end"},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.newEvent.date,callback:function(t){e.$set(e.newEvent,"date",t)},expression:"newEvent.date"}})],1)],1)],1),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{staticClass:"float-right ",staticStyle:{border:"1px solid black"},attrs:{flat:"",label:"Save"},on:{click:function(t){return e.createEvent()}}})],1)],1)],1)],1),n("q-btn",{attrs:{icon:"fas fa-angle-left",flat:""},on:{click:function(t){return e.calendar.prev()}}}),n("q-btn",{attrs:{icon:"fas fa-angle-right",flat:""},on:{click:function(t){return e.calendar.next()}}}),n("q-space"),n("q-btn-dropdown",{attrs:{label:e.calendarView,flat:""}},[n("q-list",[n("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.setCalenderView("day")}}},[n("q-item-section",[e._v("Day")])],1),n("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.setCalenderView("week")}}},[n("q-item-section",[e._v("Week")])],1),n("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.setCalenderView("month")}}},[n("q-item-section",[e._v("Month")])],1),n("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.setCalenderView("schedule")}}},[n("q-item-section",[e._v("Day Schedule")])],1),n("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.setCalenderView("week schedule")}}},[n("q-item-section",[e._v("Week Schedule")])],1)],1)],1)],1)],1),n("div",{staticClass:"col-12 q-pa-md"},[n("div",{staticStyle:{height:"calc(100vh - 30%)"},attrs:{id:e.containerId}})])])])])],1)],1)},o=[],s=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("456d"),n("6b54"),n("06db"),n("9523")),i=n.n(s),r=n("573d"),l=n("3cdd"),c=n("3e32"),d=n("a20c"),v=n("e44e"),p=n("2f62");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={name:"Calendar",data:function(){return{searchInput:"",showEventDialog:!1,showEventDialogTarget:!0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],pdate:new Date,newEventConfig:{showAddDescription:!1,showAddLocation:!1},newEvent:{event_title:"New event",event_type:"event",event_description:null,event_location:null,all_day:!1,date:new Date,event_start_date:new Date,event_end_date:null},calendarView:"month",date:new Date,showSearchInput:!1,calendar:null,showUploadComponent:!1,showSideBar:!0,viewParameters:{tableName:"document"},containerId:"id-"+(new Date).getMilliseconds(),screenWidth:(window.screen.width<1200?window.screen.width:1200)+"px"}},methods:w(w({eventTrashed:function(){console.log("Event trashed",arguments)}},Object(p["b"])(["createRow","loadData","updateRow"])),{},{createEvent:function(){var e=this;console.log("Create new event",this.newEvent),this.newEvent.tableName="calendar",this.newEvent.event_start_date=this.newEvent.date,this.createRow(this.newEvent).then((function(t){console.log("created event",t),e.calendar.refetchEvents(),e.$refs.newEventDialog.hide(),e.newEvent={event_title:e.newEvent.event_title,event_type:e.newEvent.event_type,event_description:null,event_location:null,all_day:!1,date:new Date,event_start_date:new Date,event_end_date:null}})).catch((function(t){console.log("Failed to create event",t),e.$q.notify({message:"Failed to create event "+JSON.stringify(t)})}))},setDate:function(e){console.log("set date",e),e=e?new Date(Date.parse(e)):new Date,this.date=e,this.calendar.gotoDate(e)},setCalenderView:function(e){switch(this.calendarView=e,e){case"week":return void this.calendar.changeView("timeGridWeek");case"day":return void this.calendar.changeView("timeGridDay");case"month":return void this.calendar.changeView("dayGridMonth");case"schedule":return void this.calendar.changeView("listDay");case"week schedule":return void this.calendar.changeView("listWeek")}},addNewEvent:function(){console.log("Add new event")}}),computed:{},watch:{date:function(){console.log("Date changed",this.date.toString())}},mounted:function(){var e=this;e.containerId="id-"+(new Date).getMilliseconds(),console.log("Mounted Calendar",e.containerId),window.onresize=function(){document.body.clientWidth>1400&&!e.showSideBar?e.showSideBar=!0:document.body.clientWidth<1400&&e.showSideBar&&(e.showSideBar=!1)},window.onresize(),setTimeout((function(){e.calendar=new r["a"](document.getElementById(e.containerId),{plugins:[l["b"],c["a"],v["a"],d["a"]],initialView:"dayGridMonth",selectable:!0,editable:!0,eventResize:function(t){console.log("drop info",t);var n=t.oldEvent._def.extendedProps.reference_id;e.updateRow({tableName:"calendar",id:n,event_end_date:t.event.end}).then((function(e){console.log("Event saved")})).catch((function(t){console.log("Failed to save event",t),e.calendar.refetchEvents(),e.$q.notify({message:"Failed to save event: "+JSON.stringify(t)})}))},eventDrop:function(t){console.log("drop info",t);var n=t.oldEvent._def.extendedProps.reference_id;e.updateRow({tableName:"calendar",id:n,event_start_date:t.event.start,event_end_date:t.event.end}).then((function(e){console.log("Event saved")})).catch((function(n){console.log("Failed to save event",n),t.revert(),e.$q.notify({message:"Failed to save event: "+JSON.stringify(n)})}))},eventClick:function(e){console.log("Event clicked",e)},events:function(t,n,a){console.log("get events for date: ",t),e.loadData({tableName:"calendar",params:{query:JSON.stringify([{column:"event_start_date",operator:"after",value:t.start},{column:"event_start_date",operator:"before",value:t.end}])}}).then((function(e){console.log("Events",e.data),n(e.data.map((function(e){return e.title=e.event_title,e.start=e.event_start_date,e.end=e.event_end_date,e.id=e.reference_id,e})))})).catch((function(t){console.log("Failed to load events",t),e.$q.notify({message:"Failed to load events: "+JSON.stringify(t)}),a(t)}))},dateClick:function(t){if(e.showEventDialog)return e.showEventDialogTarget=!0,e.showEventDialog=!1,void e.$refs.newEventDialog.hide();console.log("Clicked on : ",t),e.newEvent.date=t.date,e.showEventDialog=!0,e.showEventDialogTarget=t.dayEl,e.$refs.newEventDialog.show()},nowIndicator:!0,height:window.screen.height-200,headerToolbar:{start:"",center:"",end:""},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},buttonText:{today:"today",month:"month",next:">",prev:"<",week:"week",day:"day",list:"list"},navLinks:!0}),e.calendar.render()}),300)}},m=f,h=(n("cc6b"),n("2877")),b=n("09e3"),y=n("9989"),g=n("9c40"),E=n("52ee"),_=n("0016"),q=n("65c6"),k=n("4e73"),C=n("d847"),D=n("f09f"),x=n("a370"),S=n("27f9"),N=n("6a67"),Y=n("8f8e"),O=n("adad"),Q=n("823b"),$=n("7cbe"),M=n("ca78"),j=n("d66b"),P=n("4b7e"),T=n("2c91"),V=n("f20b"),B=n("1c1c"),I=n("66e5"),H=n("4074"),F=n("7f67"),J=n("eebe"),A=n.n(J),R=Object(h["a"])(m,a,o,!1,null,null,null);t["default"]=R.exports;A()(R,"components",{QPageContainer:b["a"],QPage:y["a"],QBtn:g["a"],QDate:E["a"],QIcon:_["a"],QToolbar:q["a"],QMenu:k["a"],QBar:C["a"],QCard:D["a"],QCardSection:x["a"],QInput:S["a"],QBtnToggle:N["a"],QCheckbox:Y["a"],QTabPanels:O["a"],QTabPanel:Q["a"],QPopupProxy:$["a"],QTime:M["a"],QEditor:j["a"],QCardActions:P["a"],QSpace:T["a"],QBtnDropdown:V["a"],QList:B["a"],QItem:I["a"],QItemSection:H["a"]}),A()(R,"directives",{ClosePopup:F["a"]})},c347c:function(e,t,n){},cc6b:function(e,t,n){"use strict";var a=n("c347c"),o=n.n(a);o.a}}]);